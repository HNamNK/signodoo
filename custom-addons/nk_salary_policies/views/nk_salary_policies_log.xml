<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">

        <record id="view_nk_salary_policies_log_list" model="ir.ui.view">
            <field name="name">nk.salary.policies.log.list</field>
            <field name="model">nk.salary.policies.log</field>
            <field name="arch" type="xml">
                <list create="0" edit="0" delete="0" 
                    decoration-info="log_level == 'batch'"
                    decoration-warning="log_level == 'record' and is_auto == True"
                    decoration-primary="log_level == 'record' and is_auto == False"
                    class="nk_salary_policies_list">
                    <field name="create_date" string="Thời gian"/>
                    <field name="log_level" string="Loại nhật Ký" widget="badge"/>
                    <field name="employee_id" string="Nhân viên" optional="show"/>
                    <field name="user_id" string="Người thực hiện"/>
                    <field name="action_type" string="Thao tác"/>
                                        <field name="old_value" string="Giá trị cũ" optional="show"/>
                    <field name="new_value" string="Giá trị mới" optional="show"/>
                    <field name="is_auto" string="Tự động" widget="boolean_toggle" optional="show"/>
                    <field name="trigger_batch_id" string="Do Nhật ký đợt chính sách" optional="show"/>
                    <field name="description" string="Chi tiết"/>
                </list>
            </field>
        </record>

        <record id="view_nk_salary_policies_log_search" model="ir.ui.view">
            <field name="name">nk.salary.policies.log.search</field>
            <field name="model">nk.salary.policies.log</field>
            <field name="arch" type="xml">
                <search>
                    <field name="batch_id"/>
                    <field name="employee_id"/>
                    <field name="user_id"/>
                    <field name="description"/>
                    
                    <filter string="Lịch sử đợt Chính Sách" name="filter_batch" domain="[('log_level', '=', 'batch')]"/>
                    <filter string="Nhật ký từng nhân viên" name="filter_record" domain="[('log_level', '=', 'record')]"/>
                    <separator/>
                    <filter string="Thay đổi tự động" name="filter_auto" domain="[('is_auto', '=', True)]"/>
                    <filter string="Thay đổi thủ công" name="filter_manual" domain="[('is_auto', '=', False)]"/>
                    
                    <group expand="0" string="Nhóm theo">
                        <filter string="Loại nhật ký" name="group_level" context="{'group_by': 'log_level'}"/>
                        <filter string="Loại thao tác" name="group_action" context="{'group_by': 'action_type'}"/>
                        <filter string="Người thực hiện" name="group_user" context="{'group_by': 'user_id'}"/>
                        <filter string="Nhân viên" name="group_employee" context="{'group_by': 'employee_id'}"/>
                    </group>
                </search>
            </field>
        </record>

    </data>
</odoo>